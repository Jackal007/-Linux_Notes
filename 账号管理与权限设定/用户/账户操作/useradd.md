```
useradd [-u UID] [-g 初始群组] [-G 次要群组] [-mM] [-c 说明栏] [-d 家目录绝对路径] [-s shell] 使用者账号名
选项与参数：
-u ：后面接的是 UID ，是一组数字。直接指定一个特定的 UID 给这个账号；
-g ：后面接的那个组名就是我们上面提到的 initial group 啦～
 该群组的 GID 会被放置到 /etc/passwd 的第四个字段内。
-G ：后面接的组名则是这个账号还可以加入的群组。
 这个选项与参数会修改 /etc/group 内的相关资料喔！
-M ：强制！不要建立用户家目录！(系统账号默认值)
-m ：强制！要建立用户家目录！(一般账号默认值)
-c ：这个就是 /etc/passwd 的第五栏的说明内容啦～可以随便我们设定的啦～
-d ：指定某个目录成为家目录，而不要使用默认值。务必使用绝对路径！
-r ：建立一个系统的账号，这个账号的 UID 会有限制 (参考 /etc/login.defs)
-s ：后面接一个 shell ，若没有指定则预设是 /bin/bash 的啦～
-e ：后面接一个日期，格式为『YYYY-MM-DD』此项目可写入 shadow 第八字段，
 亦即账号失效日的设定项目啰；
-f ：后面接 shadow 的第七字段项目，指定密码是否会失效。0 为立刻失
```

#### 会做的操作：

* 在 /etc/passwd 里面建立一行与账号相关的数据，包括建立 UID/GID/家目录等；
* 在 /etc/shadow 里面将此账号的密码相关参数填入，但是尚未有密码；
* 在 /etc/group 里面加入一个与账号名称一模一样的组名；
* 在 /home 底下建立一个与账号同名的目录作为用户家目录，且权限为 700

#### useradd默认值：

```
root@study ~]# useradd -D
GROUP=100 <==预设的群组
HOME=/home <==默认的家目录所在目录
INACTIVE=-1 <==密码失效日，在 shadow 内的第 7 栏
EXPIRE= <==账号失效日，在 shadow 内的第 8 栏
SHELL=/bin/bash <==预设的 shell
SKEL=/etc/skel <==用户家目录的内容数据参考目录
CREATE_MAIL_SPOOL=yes <==是否主动帮使用者建立邮件信箱(mailbox)
```

> 这个数据其实是由 /etc/default/useradd 呼叫出来的！
>
> ##### GROUP=100：新建账号的初始群组使用 GID 为 100 者
>
> 系统上面 GID 为 100 者即是 users 这个群组，此设定项目指的就是让新设使用者账号的初始群
>
> 组为 users 这一个的意思。 但是我们知道 CentOS 上面并不是这样的，在 CentOS 上面预设的
>
> 群组为与账号名相同的群组。 举例来说， vbird1 的初始群组为 vbird1 。怎么会这样啊？这是因
>
> 为针对群组的角度有两种不同的机制所致， 这两种机制分别是：
>
> ##### 私有群组机制：
>
> 系统会建立一个与账号一样的群组给使用者作为初始群组。 这种群组的设定机制会比较有保密性，
>
> 这是因为使用者都有自己的群组，而且家目录权限将会设定为 700 \(仅有自己可进入自己的家目录\)
>
> 之故。使用这种机制将不会参考 GROUP=100 这个设定值。代表性的 distributions 有 RHEL,
>
> Fedora, CentOS 等；
>
> ##### 公共群组机制：
>
> 就是以 GROUP=100 这个设定值作为新建账号的初始群组，因此每个账号都属于 users 这个群组，
>
> 且默认家目录通常的权限会是『 drwxr-xr-x ... username users ... 』，由于每个账号都属于 users 群
>
> 组，因此大家都可以互相分享家目录内的数据之故。代表 distributions 如 SuSE 等。
>
> 由于我们的 CentOS 使用私有群组机制，因此这个设定项目是不会生效的！不要太紧张啊！
>
> ##### HOME=/home：用户家目录的基准目录\(basedir\)
>
> 用户的家目录通常是与账号同名的目录，这个目录将会摆放在此设定值的目录后。所以 vbird1 的
>
> 家目录就会在 /home/vbird1/ 了！很容易理解吧！
>
> ##### INACTIVE=-1：密码过期后是否会失效的设定值
>
> 我们在 shadow 文件结构当中谈过，第七个字段的设定值将会影响到密码过期后， 在多久时间内
>
> 还可使用旧密码登入。这个项目就是在指定该日数啦！如果是 0 代表密码过期立刻失效， 如果
>
> 是 -1 则是代表密码永远不会失效，如果是数字，如 30 ，则代表过期 30 天后才失效。
>
> ##### EXPIRE=：账号失效的日期
>
> 就是 shadow 内的第八字段，你可以直接设定账号在哪个日期后就直接失效，而不理会密码的问题。
>
> 通常不会设定此项目，但如果是付费的会员制系统，或许这个字段可以设定喔！
>
> ##### SHELL=/bin/bash：默认使用的 shell 程序文件名
>
> 系统默认的 shell 就写在这里。假如你的系统为 mail server ，你希望每个账号都只能使用 email
>
> 的收发信件功能， 而不许用户登入系统取得 shell ，那么可以将这里设定为 /sbin/nologin ，如此
>
> 一来，新建的使用者预设就无法登入！ 也免去后续使用 usermod 进行修改的手续！
>
> ##### SKEL=/etc/skel：用户家目录参考基准目录
>
> 这个咚咚就是指定用户家目录的参考基准目录啰～举我们的范例一为例， vbird1 家目录
>
> /home/vbird1 内的各项数据，都是由 /etc/skel 所复制过去的～所以呢，未来如果我想要让新增使
>
> 用者时，该用户的环境变量 ~/.bashrc 就设定妥当的话，您可以到 /etc/skel/.bashrc 去编辑一下，
>
> 也可以建立 /etc/skel/www 这个目录，那么未来新增使用者后，在他的家目录下就会有 www 那
>
> 个目录了！这样瞭呼？
>
> ##### CREATE\_MAIL\_SPOOL=yes：建立使用者的 mailbox
>
> 你可以使用『 ll /var/spool/mail/vbird1 』看一下，会发现有这个文件的存在喔！这就是使用者的邮
>
> 件信箱！
>
> 除了这些基本的账号设定值之外， UID/GID 还有密码参数又是在哪里参考的呢？那就得要看一下
>
> /etc/login.defs 啦！ 这个文件的内容有点像底下这样：



